/*! For license information please see paste.js.LICENSE.txt */
(()=>{function t(){const t=document.querySelectorAll("td.score input"),e={};let n=0,o=0;const i=document.querySelector('#whatIfControlsContainer input[type="checkbox"]'),l=i&&i.checked;document.querySelectorAll("#weightContainer input").forEach((t=>{const n=t.id.replace("weight_","").replace(/_/g," "),o=parseFloat(t.value);e[n]=isNaN(o)||o<0?1:o}));const a={};let r=0,c=0;t.forEach((t=>{const e=t.closest("tr"),n=(e.querySelector("td:nth-child(2) .ng-binding")?.textContent||"").trim(),o=t.value.trim().split("/");if(2===o.length){const t=parseFloat(o[0]),e=parseFloat(o[1]);!isNaN(t)&&!isNaN(e)&&e>0&&(a[n]||(a[n]={totalEarned:0,totalPossible:0}),a[n].totalEarned+=t,a[n].totalPossible+=e,r+=t,c+=e)}}));let d="--";if(l){for(const t in a){const i=a[t],l=i.totalPossible>0?i.totalEarned/i.totalPossible:0,r=e[t]||1;n+=l*r,o+=r}o>0&&(d=(n/o*100).toFixed(2)+"%")}else c>0&&(d=(r/c*100).toFixed(2)+"%");const s=document.querySelector("table.linkDescList td:nth-child(5)");if(s){const t=s.textContent.trim(),e=t.match(/(\d+\.\d+%)/),n=e?e[0]:t;s.innerHTML=`${n} <span style="color:#007acc;font-weight:bold;">(${d} What-If)</span>`}}const e=document.createElement("style");e.textContent="\n#whatIfControlsContainer {\n  border: 1px solid #ddd;\n  padding: 20px;\n  margin-bottom: 20px;\n  background: #f9f9f9;\n  font-family: Arial, sans-serif;\n}\n\n#whatIfControlsContainer h3 {\n  margin-top: 0;\n  font-family: Arial, sans-serif;\n  font-size: 18px;\n}\n\n.score-input, .weight-input {\n  padding: 5px;\n  font-size: 14px;\n  width: 80px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n.weight-label {\n  font-size: 14px;\n  font-weight: bold;\n}\n\n#weightContainer label {\n  display: inline-block;\n  width: 150px;\n  text-align: right;\n}\n\n#weightContainer input {\n  margin-left: 10px;\n}\n",document.head.appendChild(e),function(e){const n=document.querySelector("table.linkDescList");if(!n)return;const o=document.createElement("div");o.id="whatIfControlsContainer";const i=document.createElement("h3");i.textContent="What-If Scenario Calculator",i.style.marginBottom="10px",o.appendChild(i);const l=document.createElement("p");l.textContent='Use the tools below to adjust assignment scores and set category weights to see a "What-If" final grade.',l.style.marginBottom="20px",l.style.fontSize="14px",o.appendChild(l);const a=document.createElement("div");a.style.marginBottom="20px";const r=document.createElement("label");r.textContent="Use Weighted Calculation: ",r.style.fontWeight="bold",r.style.display="inline-block",r.style.marginRight="10px";const c=document.createElement("input");c.type="checkbox",c.checked=!1,c.addEventListener("change",t),r.appendChild(c),a.appendChild(r),o.appendChild(a);const d=document.createElement("fieldset"),s=document.createElement("legend");s.textContent="Category Weights (Only applies if weighted calculation is enabled)",s.style.fontWeight="bold",s.style.fontSize="14px",s.style.marginBottom="10px",d.appendChild(s),d.style.border="1px solid #ccc",d.style.padding="10px",d.style.marginBottom="20px";const p=document.createElement("div");p.id="weightContainer",e.forEach((e=>{const n=document.createElement("div");n.style.marginBottom="10px";const o=document.createElement("label");o.textContent=`${e}: `,o.className="weight-label",o.style.marginRight="10px";const i=document.createElement("input");i.type="number",i.value="1",i.min=0,i.step=.1,i.className="weight-input",i.id=`weight_${e.replace(/\s+/g,"_")}`,i.title="Set the weight for this category (e.g. 0.4 for 40%)",i.addEventListener("input",t),n.appendChild(o),n.appendChild(i),p.appendChild(n)})),d.appendChild(p),o.appendChild(d),n.parentElement.insertBefore(o,n)}([...new Set(function(){const t=document.getElementById("scoreTable");if(!t)return[];const e=t.querySelectorAll("tbody tr[data-ng-repeat-start]"),n=[];return e.forEach((t=>{const e=(t.querySelector("td:nth-child(1)")?.textContent||"").trim(),o=(t.querySelector("td:nth-child(2) .ng-binding")?.textContent||"").trim(),i=(t.querySelector("td:nth-child(3) .ng-binding")?.textContent||"").trim(),l=t.querySelector("td.score .ng-binding"),a=t.querySelector("span.weightedScore"),r=t.querySelector('td[data-ng-if*="showPercentGrade"]'),c=t.querySelector('td[data-ng-if*="showLetterGrade"]');let d=l?l.textContent.trim():"--",s=a?a.textContent.trim():"";const p=r?r.textContent.trim():"--",h=c?c.textContent.trim():"--";n.push([e,o,i,d,s,p,h])})),n}().map((t=>t[1])))]),document.querySelectorAll("tbody tr[data-ng-repeat-start]").forEach((e=>{const n=e.querySelector("td.score .ng-binding");let o=e.querySelector("span.weightedScore")||n;if(!o)return;let i=o.textContent.trim(),l=i.match(/(\d+(\.\d+)?\/\d+(\.\d+)?)/),a=l?l[0]:i;const r=document.createElement("input");r.type="text",r.value=a,r.className="score-input",r.title='Enter earned/possible points (e.g. "8/10")',r.placeholder="e.g. 8/10",r.addEventListener("input",t),o.textContent="",o.appendChild(r)})),t()})();