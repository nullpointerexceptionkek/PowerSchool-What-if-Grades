/*! For license information please see paste.js.LICENSE.txt */
(()=>{function t(){const t=document.querySelectorAll("td.score input"),e={};let n=0,o=0;const r=document.querySelector('#whatIfControlsContainer input[type="checkbox"]'),c=r&&r.checked;document.querySelectorAll("#weightContainer input").forEach((t=>{const n=t.id.replace("weight_","").replace(/_/g," "),o=parseFloat(t.value);e[n]=isNaN(o)||o<0?1:o}));const i={};let l=0,a=0;t.forEach((t=>{const e=t.closest("tr"),n=(e.querySelector("td:nth-child(2) .ng-binding")?.textContent||"").trim(),o=t.value.trim().split("/");if(2===o.length){const t=parseFloat(o[0]),e=parseFloat(o[1]);!isNaN(t)&&!isNaN(e)&&e>0&&(i[n]||(i[n]={totalEarned:0,totalPossible:0}),i[n].totalEarned+=t,i[n].totalPossible+=e,l+=t,a+=e)}}));let d="--";if(c){for(const t in i){const r=i[t],c=r.totalPossible>0?r.totalEarned/r.totalPossible:0,l=e[t]||1;n+=c*l,o+=l}o>0&&(d=(n/o*100).toFixed(2)+"%")}else a>0&&(d=(l/a*100).toFixed(2)+"%");const s=document.querySelector("table.linkDescList td:nth-child(5)");if(s){const t=s.textContent.match(/(\d+\.\d+%)/),e=t?t[0]:"";s.innerHTML=`${e} (${d} What-If)`}}const e=document.createElement("style");e.textContent="\n.score-input, .weight-input {\n  padding: 5px;\n  margin: 5px;\n  font-size: 14px;\n  width: 80px;\n}\n.weight-label {\n  font-size: 14px;\n  font-weight: bold;\n}\n#whatIfControlsContainer {\n  margin-bottom: 20px;\n}\n",document.head.appendChild(e),function(e){const n=document.querySelector("table.linkDescList");if(!n)return;const o=document.createElement("div");o.id="whatIfControlsContainer";const r=document.createElement("label");r.textContent="Use Weighted Calculation",r.style.fontWeight="bold";const c=document.createElement("input");c.type="checkbox",c.checked=!1,c.style.marginLeft="10px",c.addEventListener("change",t),r.appendChild(c),o.appendChild(r),o.appendChild(document.createElement("br")),o.appendChild(document.createElement("br"));const i=document.createElement("div");i.id="weightContainer",e.forEach((e=>{const n=document.createElement("label");n.textContent=`${e}: `,n.className="weight-label";const o=document.createElement("input");o.type="number",o.value="1",o.min=0,o.step=.1,o.className="weight-input",o.id=`weight_${e.replace(/\s+/g,"_")}`,o.addEventListener("input",t),i.appendChild(n),i.appendChild(o),i.appendChild(document.createElement("br"))})),o.appendChild(i),n.parentElement.insertBefore(o,n)}([...new Set(function(){const t=document.getElementById("scoreTable");if(!t)return[];const e=t.querySelectorAll("tbody tr[data-ng-repeat-start]"),n=[];return e.forEach((t=>{const e=(t.querySelector("td:nth-child(1)")?.textContent||"").trim(),o=(t.querySelector("td:nth-child(2) .ng-binding")?.textContent||"").trim(),r=(t.querySelector("td:nth-child(3) .ng-binding")?.textContent||"").trim(),c=t.querySelector("td.score .ng-binding"),i=t.querySelector("span.weightedScore"),l=t.querySelector('td[data-ng-if*="showPercentGrade"]'),a=t.querySelector('td[data-ng-if*="showLetterGrade"]');let d=c?c.textContent.trim():"--",s=i?i.textContent.trim():"";const u=l?l.textContent.trim():"--",p=a?a.textContent.trim():"--";n.push([e,o,r,d,s,u,p])})),n}().map((t=>t[1])))]),document.querySelectorAll("tbody tr[data-ng-repeat-start]").forEach((e=>{const n=e.querySelector("td.score .ng-binding");let o=e.querySelector("span.weightedScore")||n;if(!o)return;let r=o.textContent.trim(),c=r.match(/(\d+(\.\d+)?\/\d+(\.\d+)?)/),i=c?c[0]:r;const l=document.createElement("input");l.type="text",l.value=i,l.className="score-input",l.addEventListener("input",t),o.textContent="",o.appendChild(l)})),t()})();